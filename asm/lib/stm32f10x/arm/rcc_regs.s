             AREA  REGS, DATA, READONLY


RCC_BASE      EQU  0x40021000    

RCC_CR        EQU  RCC_BASE +  0x0

RCC_CR_HSION  EQU (1<<0) 
RCC_CR_HSIRDY EQU (1<<1)        
RCC_CR_HSEON  EQU (1<<16)        
RCC_CR_HSERDY EQU (1<<17)        
RCC_CR_HSEBYP EQU (1<<18)
RCC_CR_CSSON  EQU (1<<19)
RCC_CR_PLLON  EQU (1<<24)        
RCC_CR_PLLRDY EQU (1<<25)        


RCC_CFGR  EQU  RCC_BASE + 0x04

;//clock source
RCC_CFGR_SW_HSI      EQU (0<<0)
RCC_CFGR_SW_HSE      EQU (1<<0)
RCC_CFGR_SW_PLL      EQU (2<<0)
RCC_CFGR_SW_CLEARMASK    EQU (3<<0)

RCC_CFGR_SWS_HSI      EQU (0<<2)
RCC_CFGR_SWS_HSE      EQU (1<<2)
RCC_CFGR_SWS_PLL      EQU (2<<2)


;//AHB prescaler (up to 72Mhz)
RCC_CFGR_AHB_HCLK_PRE_SYSCLK_DIV1   EQU (0<<4) 
RCC_CFGR_AHB_HCLK_PRE_SYSCLK_DIV2   EQU (8<<4) 
RCC_CFGR_AHB_HCLK_PRE_SYSCLK_DIV4   EQU (9<<4)
RCC_CFGR_AHB_HCLK_PRE_SYSCLK_DIV8   EQU (10<<4) 
RCC_CFGR_AHB_HCLK_PRE_SYSCLK_DIV16  EQU (11<<4) 
RCC_CFGR_AHB_HCLK_PRE_SYSCLK_DIV64  EQU (12<<4) 
RCC_CFGR_AHB_HCLK_PRE_SYSCLK_DIV128 EQU (13<<4) 
RCC_CFGR_AHB_HCLK_PRE_SYSCLK_DIV256 EQU (14<<4) 
RCC_CFGR_AHB_HCLK_PRE_SYSCLK_DIV512 EQU (15<<4)
RCC_CFGR_AHB_HCLK_PRE_SYSCLK_CLEARMASK EQU (15<<4)

;//APB1 low speed prescaler (up to 32Mhz) AHB / div
RCC_CFGR_APB1_PCLK1_PRE_AHB_HCLK_DIV1  EQU (0<<8) 
RCC_CFGR_APB1_PCLK1_PRE_AHB_HCLK_DIV2  EQU (4<<8)
RCC_CFGR_APB1_PCLK1_PRE_AHB_HCLK_DIV4  EQU (5<<8)
RCC_CFGR_APB1_PCLK1_PRE_AHB_HCLK_DIV8  EQU (6<<8)
RCC_CFGR_APB1_PCLK1_PRE_AHB_HCLK_DIV16 EQU (7<<8)
RCC_CFGR_APB1_PCLK1_PRE_AHB_HCLK_CLEARMASK EQU (7<<8)


;//APB2 high speed prescaler (up to 72 Mhz)  AHB / div
RCC_CFGR_APB2_PCLK2_PRE_AHB_HCLK_DIV1  EQU (0<<11)
RCC_CFGR_APB2_PCLK2_PRE_AHB_HCLK_DIV2  EQU (4<<11)
RCC_CFGR_APB2_PCLK2_PRE_AHB_HCLK_DIV4  EQU (5<<11) 
RCC_CFGR_APB2_PCLK2_PRE_AHB_HCLK_DIV8  EQU (6<<11) 
RCC_CFGR_APB2_PCLK2_PRE_AHB_HCLK_DIV16 EQU (7<<11) 
RCC_CFGR_APB2_PCLK2_PRE_AHB_HCLK_CLEARMASK EQU (7<<11)


;//ADC presc:  APB2 / DIV
RCC_CFGR_ADCPRE_APB2_PCLK2_DIV2 EQU (0<<14)
RCC_CFGR_ADCPRE_APB2_PCLK2_DIV4 EQU (1<<14)
RCC_CFGR_ADCPRE_APB2_PCLK2_DIV6 EQU (2<<14)
RCC_CFGR_ADCPRE_APB2_PCLK2_DIV8 EQU (3<<14)
RCC_CFGR_ADCPRE_APB2_PCLK2_CLEARMASK EQU (3<<14)

RCC_CFGR_PLLSRC_HSI_DIV2    EQU (0<<16)
RCC_CFGR_PLLSRC_PREDIV1     EQU (1<<16)
RCC_CFGR_PLLSRC_HSE         EQU (1<<16)
RCC_CFGR_PLLSRC_CLEARMASK   EQU (1<<16)

RCC_CFGR_PLLXTPRE      EQU (1<<17)

RCC_CFGR_PLL_MUL2  EQU (0<<18)   
RCC_CFGR_PLL_MUL3  EQU (1<<18)
RCC_CFGR_PLL_MUL4  EQU (2<<18)  
RCC_CFGR_PLL_MUL5  EQU (3<<18)  
RCC_CFGR_PLL_MUL6  EQU (4<<18)  
RCC_CFGR_PLL_MUL7  EQU (5<<18)  
RCC_CFGR_PLL_MUL8  EQU (6<<18)
RCC_CFGR_PLL_MUL9  EQU (7<<18)  
RCC_CFGR_PLL_MUL10 EQU (8<<18)  
RCC_CFGR_PLL_MUL11 EQU (9<<18)  
RCC_CFGR_PLL_MUL12 EQU (10<<18)
RCC_CFGR_PLL_MUL13 EQU (11<<18)
RCC_CFGR_PLL_MUL14 EQU (12<<18)
RCC_CFGR_PLL_MUL15 EQU (13<<18)
RCC_CFGR_PLL_MUL16 EQU (14<<18)
RCC_CFGR_PLL_CLEARMASK EQU (14<<18)


RCC_APB2RSTR EQU RCC_BASE + 0xc

RCC_APB2RSTR_AFIORST   EQU (1<<0)
RCC_APB2RSTR_GIOPARST  EQU (1<<2)
RCC_APB2RSTR_GIOPBRST  EQU (1<<3)
RCC_APB2RSTR_GIOPCRST  EQU (1<<4)
RCC_APB2RSTR_GIOPDRST  EQU (1<<5)
RCC_APB2RSTR_GIOPERST  EQU (1<<6)
RCC_APB2RSTR_GIOPFRST  EQU (1<<7)
RCC_APB2RSTR_GIOPGRST  EQU (1<<8)
RCC_APB2RSTR_ADC1RST   EQU (1<<9)
RCC_APB2RSTR_ADC2RST   EQU (1<<10)
RCC_APB2RSTR_TIM1RST   EQU (1<<11)
RCC_APB2RSTR_SPI1RST   EQU (1<<12)
RCC_APB2RSTR_TIM8RST   EQU (1<<13)
RCC_APB2RSTR_USART1RST EQU (1<<14)
RCC_APB2RSTR_ADC3RST   EQU (1<<15)

;//100x vl
RCC_APB2RSTR_TIM15RST  EQU (1<<16)
RCC_APB2RSTR_TIM16RST  EQU (1<<17)
RCC_APB2RSTR_TIM17RST  EQU (1<<18)

RCC_APB2RSTR_TIM9RST  EQU (1<<19)
RCC_APB2RSTR_TIM10RST EQU (1<<20)
RCC_APB2RSTR_TIM11RST EQU (1<<21)

RCC_APB1RSTR  EQU RCC_BASE + 0x10

RCC_APB1RSTR_TIM2RST  EQU (1<<0)
RCC_APB1RSTR_TIM3RST  EQU (1<<1)
RCC_APB1RSTR_TIM4RST  EQU (1<<2)
RCC_APB1RSTR_TIM5RST  EQU (1<<3)
RCC_APB1RSTR_TIM6RST  EQU (1<<4)
RCC_APB1RSTR_TIM7RST  EQU (1<<5)
RCC_APB1RSTR_TIM12RST EQU (1<<6)
RCC_APB1RSTR_TIM13RST EQU (1<<7)
RCC_APB1RSTR_TIM14RST EQU (1<<8)
RCC_APB1RSTR_WWDGRST EQU (1<<11)
RCC_APB1RSTR_SPI2RST EQU (1<<14)
RCC_APB1RSTR_SPI3RST EQU (1<<15)
RCC_APB1RSTR_USART2RST EQU (1<<17)
RCC_APB1RSTR_USART3RST EQU (1<<18)
RCC_APB1RSTR_UART4RST EQU (1<<19)
RCC_APB1RSTR_UART5RST EQU (1<<20)
RCC_APB1RSTR_I2C1RST EQU (1<<21)
RCC_APB1RSTR_I2C2RST EQU (1<<22)
RCC_APB1RSTR_USBRST EQU (1<<23)
RCC_APB1RSTR_CANRST EQU (1<<25)
RCC_APB1RSTR_BKPRST   EQU (1<<27) 
RCC_APB1RSTR_PWRRST   EQU (1<<28)
RCC_APB1RSTR_DACRST   EQU (1<<29) 
RCC_APB1RSTR_CECRST   EQU (1<<30) 


RCC_AHBENR  EQU RCC_BASE + 0x14

RCC_AHBENR_DMA1EN   EQU (1<<0)
RCC_AHBENR_DMA2EN   EQU (1<<1)
RCC_AHBENR_SRAMEN   EQU (1<<2)
RCC_AHBENR_FLITFEN  EQU (1<<4)
RCC_AHBENR_CRCEN    EQU (1<<6)
RCC_AHBENR_FSMCEN   EQU (1<<8)
RCC_AHBENR_SDIOEN   EQU (1<<10)
RCC_AHBENR_OTGFSEN   EQU (1<<12)
RCC_AHBENR_ETHMACEN   EQU (1<<14)
RCC_AHBENR_ETHMACTXEN   EQU (1<<15)
RCC_AHBENR_ETHMACRXEN   EQU (1<<16)

RCC_APB2ENR  EQU RCC_BASE + 0x18

RCC_APB2ENR_AFIOEN   EQU (1<<0)
RCC_APB2ENR_IOPAEN  EQU (1<<2)
RCC_APB2ENR_IOPBEN  EQU (1<<3)
RCC_APB2ENR_IOPCEN  EQU (1<<4)
RCC_APB2ENR_IOPDEN  EQU (1<<5)
RCC_APB2ENR_IOPEEN  EQU (1<<6)
RCC_APB2ENR_IOPFEN  EQU (1<<7)
RCC_APB2ENR_IOPGEN  EQU (1<<8)
RCC_APB2ENR_ADC1EN   EQU (1<<9)
RCC_APB2ENR_ADC2EN   EQU (1<<10)
RCC_APB2ENR_TIM1EN   EQU (1<<11)
RCC_APB2ENR_SPI1EN   EQU (1<<12)
RCC_APB2ENR_TIM8EN   EQU (1<<13)
RCC_APB2ENR_USART1EN EQU (1<<14)
RCC_APB2ENR_ADC3EN   EQU (1<<15)

;//100x vl
RCC_APB2ENR_TIM15EN  EQU (1<<16)
RCC_APB2ENR_TIM16EN  EQU (1<<17)
RCC_APB2ENR_TIM17EN  EQU (1<<18)

RCC_APB2ENR_TIM9EN  EQU (1<<19)
RCC_APB2ENR_TIM10EN EQU (1<<20)
RCC_APB2ENR_TIM11EN EQU (1<<21)


RCC_APB1ENR  EQU RCC_BASE + 0x1c

RCC_APB1ENR_TIM2EN  EQU (1<<0)
RCC_APB1ENR_TIM3EN  EQU (1<<1)
RCC_APB1ENR_TIM4EN  EQU (1<<2)
RCC_APB1ENR_TIM5EN  EQU (1<<3)
RCC_APB1ENR_TIM6EN  EQU (1<<4)
RCC_APB1ENR_TIM7EN  EQU (1<<5)
RCC_APB1ENR_TIM12EN EQU (1<<6)
RCC_APB1ENR_TIM13EN EQU (1<<7)
RCC_APB1ENR_TIM14EN EQU (1<<8)
RCC_APB1ENR_WWDGEN EQU (1<<11)
RCC_APB1ENR_SPI2EN EQU (1<<14)
RCC_APB1ENR_SPI3EN EQU (1<<15)
RCC_APB1ENR_USART2EN EQU (1<<17)
RCC_APB1ENR_USART3EN EQU (1<<18)
RCC_APB1ENR_UART4EN EQU (1<<19)
RCC_APB1ENR_UART5EN EQU (1<<20)
RCC_APB1ENR_I2C1EN EQU (1<<21)
RCC_APB1ENR_I2C2EN EQU (1<<22)
RCC_APB1ENR_USBEN EQU (1<<23)
RCC_APB1ENR_CANEN EQU (1<<25)
RCC_APB1ENR_BKPEN   EQU (1<<27) 
RCC_APB1ENR_PWREN   EQU (1<<28)
RCC_APB1ENR_DACEN   EQU (1<<29) 
RCC_APB1ENR_CECEN   EQU (1<<30)

RCC_BDCR  EQU RCC_BASE + 0x20
    
RCC_BDCR_LSEON  EQU (1<<0)         
RCC_BDCR_LSERDY EQU (1<<1)         


RCC_BDCR_RTC_NOCLK        EQU (0<<8)
RCC_BDCR_RTC_LSE          EQU (1<<8)
RCC_BDCR_RTC_LSI          EQU (2<<8)
RCC_BDCR_RTC_HSE128       EQU (3<<8)
RCC_BDCR_RTC_CLEARMASK    EQU (3<<8)

RCC_BDCR_RTCEN   EQU (1<<15)    
RCC_BDCR_BDRST   EQU (1<<16)   


RCC_CSR EQU RCC_BASE + 0x24

RCC_CSR_LSION  EQU (1<<0)       
RCC_CSR_LSIRDY EQU (1<<1)       

;//HSE prescaler  for f100xx and f10x connectivity
RCC_CFGR2  EQU RCC_BASE + 0x2c
    
RCC_CFGR2_PREDIV1_DIV1   EQU 0
RCC_CFGR2_PREDIV1_DIV2   EQU 1
RCC_CFGR2_PREDIV1_DIV3   EQU 2
RCC_CFGR2_PREDIV1_DIV4   EQU 3
RCC_CFGR2_PREDIV1_DIV5   EQU 4
RCC_CFGR2_PREDIV1_DIV6   EQU 5
RCC_CFGR2_PREDIV1_DIV7   EQU 6
RCC_CFGR2_PREDIV1_DIV8   EQU 7
RCC_CFGR2_PREDIV1_DIV9   EQU 8
RCC_CFGR2_PREDIV1_DIV10  EQU 9
RCC_CFGR2_PREDIV1_DIV11  EQU 10
RCC_CFGR2_PREDIV1_DIV12  EQU 11
RCC_CFGR2_PREDIV1_DIV13  EQU 12
RCC_CFGR2_PREDIV1_DIV14  EQU 13
RCC_CFGR2_PREDIV1_DIV15  EQU 14
RCC_CFGR2_PREDIV1_DIV16  EQU 15
RCC_CFGR2_PREDIV1_CLEARMASK EQU 15

                            END